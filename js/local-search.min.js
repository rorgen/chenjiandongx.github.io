/*!
 * Hexo Theme Suka | local-search.js
 * Author: SukkaW
 * Link: https://github.com/SukkaW/hexo-theme-suka
 * License: GPL-3.0
 */
String.prototype.queryUrl=function(e){var t=this.replace(/^[^?=]*\?/gi,"").split("#")[0],a={};return t.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,n){try{r=decodeURIComponent(r)}catch(e){}try{n=decodeURIComponent(n)}catch(e){}r in a?a[r]instanceof Array?a[r].push(n):a[r]=[a[r],n]:a[r]=/\[\]$/.test(r)?[n]:n}),e?a[e]:a};var res,searchQuery=location.search.queryUrl(),searchFunc=function(e){"use strict";fetch(e).then(function(e){return e.json()}).then(function(e){var t=document.getElementById("search-output"),r=document.getElementById("search-result-num"),n=document.getElementById("search-result-info");void 0!==searchQuery.s&&(!function(v){var m="",y=v.trim().toLowerCase().split(/[\s\-]+/),E=0;if(t.innerHTML="",v.trim().length<=0)return;e.forEach(function(e){if(void 0!==e.title&&void 0!==e.content){var r=!0,n=e.title.trim().toLowerCase(),t=new Date(e.date).toLocaleDateString();if(void 0!==e.tags)var a=e.tags;else a=[];var s=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=e.url,c=-1,o=-1,l=-1,u=-1;if(""!==n&&""!==s&&y.forEach(function(e,t){c=n.indexOf(e),o=a.indexOf(e),l=s.indexOf(e),c<0&&o<0&&l<0?r=!1:(l<0&&(l=0),0===t&&(u=l),E+=1)}),r){m+='<div class="tile"><div class="tile-content">';var d=e.title;y.forEach(function(e){var t=new RegExp(e,"gi");d=d.replace(t,"<strong><mark>"+v+"</mark></strong>")}),m+='<a href="'+i+'"><p class="tile-title search-result-title">'+d+"</p></a>",m+='<p class="text-gray search-result-summary">',m+='<span class="saerch-result-date">'+t+"</span>";var h=e.content;if(0<=u){var f=u-10,g=u+10;f<0&&(f=0),0===f&&(g=10),g>h.length&&(g=h.length-10);var p=h.substr(f,g);y.forEach(function(e){var t=new RegExp(e,"gi");p=p.replace(t,"<strong><mark>"+v+"</mark></strong>")}),m+=p+"...</p>"}m+="</div></div>"}}}),(r.innerHTML=E)<=0?(n.style.display="none",t.innerHTML=window.searchNoResult):(n.style.display="block",t.innerHTML=m)}(searchQuery.s),document.getElementById("search-field").setAttribute("value",searchQuery.s))})};